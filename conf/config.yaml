#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# If you want to set the specified configuration value, you can set the new
# in this file. For example if you want to specify the etcd address:
#
# deployment:
#   role: traditional
#   role_traditional:
#     config_provider: etcd
#   etcd:
#     host:
#       - http://127.0.0.1:2379
#
# To configure via environment variables, you can use `${{VAR}}` syntax. For instance:
#
# deployment:
#   role: traditional
#   role_traditional:
#     config_provider: etcd
#   etcd:
#     host:
#       - http://${{ETCD_HOST}}:2379
#
# And then run `export ETCD_HOST=$your_host` before `make init`.
#
# If the configured environment variable can't be found, an error will be thrown.
#
# Also, If you want to use default value when the environment variable not set,
# Use `${{VAR:=default_value}}` instead. For instance:
#
# deployment:
#   role: traditional
#   role_traditional:
#     config_provider: etcd
#   etcd:
#     host:
#       - http://${{ETCD_HOST:=localhost}}:2379
#
# This will find environment variable `ETCD_HOST` first, and if it's not exist it will use `localhost` as default value.
#
deployment:
  role: traditional
  role_traditional:
    config_provider: etcd
  admin:
    admin_key:
      - name: admin
        key: edd1c9f034335f136f87ad84b625c8f1  # using fixed API token has security risk, please update it when you deploy to production environment
        role: admin
discovery:                       # service discovery center
 consul_kv:
   servers:
     - "http://10.70.12.202:8500"
   prefix: "config/apisix"
   skip_keys:                    # if you need to skip special keys
     - "upstreams/unused_api/"
   timeout:
     connect: 8000               # default 2000 ms
     read: 8000                  # default 2000 ms
     wait: 60                    # default 60 sec
   weight: 1                     # default 1
   fetch_interval: 3             # default 3 sec, only take effect for keepalive: false way
   keepalive: true               # default true, use the long pull way to query consul servers
   default_server:               # you can define default server when missing hit
     host: "127.0.0.1"
     port: 9999
     metadata:
       fail_timeout: 1           # default 1 ms
       weight: 1                 # default 1
       max_fails: 1              # default 1
   dump:                         # if you need, when registered nodes updated can dump into file
      path: "logs/consul_kv.dump"
      expire: 2592000            # unit sec, here is 30 day
apisix:
  enable_dev_mode: true
  ssl:
    enable: false